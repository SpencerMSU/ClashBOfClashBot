# ClashBot Go Version - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Go (—Ç—Ä–µ–±—É–µ—Ç—Å—è 1.21+)
go version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Python (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è YooKassa API)
python3 --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è pip
pip3 --version
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `api_tokens.txt` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ç–æ–∫–µ–Ω–æ–≤
touch api_tokens.txt
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```
# Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç—å —É @BotFather)
BOT_TOKEN=–≤–∞—à_telegram_bot_token_–∑–¥–µ—Å—å

# Clash of Clans API Token (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://developer.clashofclans.com)
COC_API_TOKEN=–≤–∞—à_clash_of_clans_api_token_–∑–¥–µ—Å—å

# Bot Username (–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–æ—Ç–∞ –±–µ–∑ @)
BOT_USERNAME=–∏–º—è_–≤–∞—à–µ–≥–æ_–±–æ—Ç–∞

# YooKassa —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id_yookassa
YOOKASSA_SECRET_KEY=–≤–∞—à_secret_key_yookassa
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Go –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod download

# Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
pip3 install aiohttp
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
go run main.go

# –ò–ª–∏ —Å–±–æ—Ä–∫–∞ –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
go build -o clashbot-go .
./clashbot-go
```

## üîß –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

#### 1. Telegram Bot Token
1. –ù–∞–π–¥–∏—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ `api_tokens.txt`

#### 2. Clash of Clans API Token
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://developer.clashofclans.com
2. –í–æ–π–¥–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—è Supercell ID
3. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á API
4. –£–∫–∞–∂–∏—Ç–µ IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –≥–¥–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ—Ç
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ `api_tokens.txt`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ClashBOfClashBot/
‚îú‚îÄ‚îÄ main.go                     # üéØ –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ api_tokens.txt             # üîë –§–∞–π–ª —Å —Ç–æ–∫–µ–Ω–∞–º–∏
‚îú‚îÄ‚îÄ payment_bridge.py          # üêç Python –º–æ—Å—Ç –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
‚îú‚îÄ‚îÄ go.mod                     # üì¶ Go –º–æ–¥—É–ª–∏
‚îú‚îÄ‚îÄ go.sum                     # üîí –•–µ—à–∏ –º–æ–¥—É–ª–µ–π
‚îú‚îÄ‚îÄ internal/                  # üèóÔ∏è –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ bot/                   # ü§ñ –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bot.go
‚îÇ   ‚îú‚îÄ‚îÄ config/                # ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go
‚îÇ   ‚îú‚îÄ‚îÄ database/              # üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service.go
‚îÇ   ‚îú‚îÄ‚îÄ api/                   # üåê API –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ coc_client.go
‚îÇ   ‚îú‚îÄ‚îÄ handlers/              # üì® –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handlers.go
‚îÇ   ‚îú‚îÄ‚îÄ payment/               # üí≥ –°–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service.go
‚îÇ   ‚îî‚îÄ‚îÄ models/                # üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îú‚îÄ‚îÄ user.go
‚îÇ       ‚îú‚îÄ‚îÄ war.go
‚îÇ       ‚îî‚îÄ‚îÄ building.go
‚îî‚îÄ‚îÄ README-GO.md               # üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª `api_tokens.txt` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ - —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞ `KEY=VALUE`
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω —É–∫–∞–∑–∞–Ω –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞
cat api_tokens.txt

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
export BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
export COC_API_TOKEN=–≤–∞—à_coc_—Ç–æ–∫–µ–Ω
```

### –ü—Ä–æ–±–ª–µ–º–∞: "COC_API_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –Ω–∞ https://developer.clashofclans.com
2. –î–æ–±–∞–≤—å—Ç–µ IP —Å–µ—Ä–≤–µ—Ä–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª—é—á–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω –≤ —Ñ–∞–π–ª–µ

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ SQLite –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø—Ä–∞–≤–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SQLite
sqlite3 --version

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã
sqlite3 test.db "CREATE TABLE test (id INTEGER);"
rm test.db
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è Telegram Bot API"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

```bash
# –¢–µ—Å—Ç API —Ç–æ–∫–µ–Ω–∞
curl -X GET "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getMe"
```

## üìã –ñ—É—Ä–Ω–∞–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

```
üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ Clash of Clans...
üìã –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
  ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...
  ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞
  ‚è≥ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...
  ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
  ‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞...
üìã –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–æ—Ç–∞:
    ‚è≥ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...
    ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
    ‚è≥ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram Bot API...
    ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ @your_bot_name
    ‚è≥ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (clashbot.db)...
    ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
    ‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Clash of Clans API –∫–ª–∏–µ–Ω—Ç–∞...
    ‚úÖ COC API –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω
    ‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π (YooKassa)...
    ‚úÖ –°–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
    ‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π...
    ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ–∑–¥–∞–Ω—ã
üéâ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–æ—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã!
  ‚úÖ –ë–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
üéØ –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –±–æ—Ç–∞...
üéØ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π...
üì° –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä–∞–º Telegram...
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
üëÇ –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...
```

## üéõÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª api_tokens.txt (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
COC_API_TOKEN=–≤–∞—à_coc_—Ç–æ–∫–µ–Ω
BOT_USERNAME=–≤–∞—à_–±–æ—Ç
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id
YOOKASSA_SECRET_KEY=–≤–∞—à_secret_key
```

### –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
export COC_API_TOKEN=–≤–∞—à_coc_—Ç–æ–∫–µ–Ω
export BOT_USERNAME=–≤–∞—à_–±–æ—Ç
export DATABASE_PATH=–ø—É—Ç—å_–∫_–±–∞–∑–µ
export OUR_CLAN_TAG=#–≤–∞—à_—Ç–µ–≥_–∫–ª–∞–Ω–∞
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------------------|----------|
| `DATABASE_PATH` | `clashbot.db` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `OUR_CLAN_TAG` | `#2PQU0PLJ2` | –¢–µ–≥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞ |
| `COC_API_BASE_URL` | `https://api.clashofclans.com/v1` | URL API Clash of Clans |
| `ARCHIVE_CHECK_INTERVAL` | `900` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—Ä—Ö–∏–≤–∞—Ç–æ—Ä–∞ (—Å–µ–∫) |
| `DONATION_SNAPSHOT_INTERVAL` | `21600` | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–Ω–∏–º–∫–æ–≤ –¥–æ–Ω–∞—Ç–æ–≤ (—Å–µ–∫) |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```bash
# –¢–µ—Å—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
go build -o /tmp/clashbot-test .

# –¢–µ—Å—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
go mod verify

# –¢–µ—Å—Ç —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤)
go test ./...
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
2. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç

## üöÄ –î–µ–ø–ª–æ–π

### –°–∏—Å—Ç–µ–º–Ω–∞—è —Å–ª—É–∂–±–∞ Linux

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/clashbot.service`:

```ini
[Unit]
Description=ClashBot Go
After=network.target

[Service]
Type=simple
User=clashbot
WorkingDirectory=/opt/clashbot
ExecStart=/opt/clashbot/clashbot-go
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∞—Ü–∏—è:

```bash
sudo systemctl enable clashbot
sudo systemctl start clashbot
sudo systemctl status clashbot
```

### Docker

```dockerfile
FROM golang:1.21-alpine AS builder
WORKDIR /app
COPY . .
RUN go build -o clashbot-go .

FROM python:3.11-alpine
RUN pip install aiohttp
WORKDIR /app
COPY --from=builder /app/clashbot-go .
COPY payment_bridge.py .
COPY api_tokens.txt .
CMD ["./clashbot-go"]
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

1. **"command not found: go"** - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Go
2. **"no such file: api_tokens.txt"** - –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å —Ç–æ–∫–µ–Ω–∞–º–∏
3. **"permission denied"** - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
4. **"cannot bind port"** - –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç
5. **"invalid token"** - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω Telegram

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
go run main.go 2>&1 | tee clashbot.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep clashbot

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
top -p $(pgrep clashbot)
```

### –ë—ç–∫–∞–ø

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
cp clashbot.db clashbot_backup_$(date +%Y%m%d).db

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø (–¥–æ–±–∞–≤–∏—Ç—å –≤ cron)
0 2 * * * /usr/bin/cp /opt/clashbot/clashbot.db /opt/backups/clashbot_$(date +\%Y\%m\%d).db
```

## üéØ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `/help` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
- `/link <—Ç–µ–≥>` - –ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏–≥—Ä–æ–∫–∞
- `/profile` - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- `/clan` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞–Ω–µ
- `/search <—Ç–µ–≥>` - –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ –∫–ª–∞–Ω–∞
- `/subscription` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
/link #ABC123DEF
/search #PlayerTag
/search #ClanTag
```

---

üéÆ **–ì–æ—Ç–æ–≤–æ!** –í–∞—à ClashBot –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.