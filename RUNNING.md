# Запуск ClashBot

Эта инструкция описывает минимальные шаги для запуска бота после настройки окружения.

## 1. Зависимости

1. Установите Python 3.10+.
2. Создайте и активируйте виртуальное окружение (по желанию).
3. Установите зависимости:

```bash
pip install -r data/requirements.txt
```

## 2. Настройка переменных

Создайте файл `api_tokens.txt` рядом с `main.py` и укажите необходимые ключи:

```
BOT_TOKEN=ваш_токен_бота
COC_API_TOKEN=токен_Clash_of_Clans
DATABASE_PATH=clashbot.db
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=пароль
```

- Если у вас уже есть готовая строка подключения вида `postgresql://user:pass@host:5432/dbname`,
  вместо параметров выше можно указать `DATABASE_URL=` с полным значением.
- Значение `DATABASE_PATH` используется как имя базы данных. Запись `clashbot.db` превратится в
  `clashbot` и будет использована при сборке строки подключения PostgreSQL.

## 3. Инициализация базы

Перед первым запуском создайте базу данных Postgres с указанным именем и выдайте права пользователю.
Все таблицы будут созданы автоматически при старте бота методом `DatabaseService.init_db()`.

## 4. Запуск

Просто выполните:

```bash
python3 main.py
```

При успешной конфигурации бот подключится к PostgreSQL, создаст недостающие таблицы и будет готов к работе.
