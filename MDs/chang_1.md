# Система отслеживания улучшений зданий

## Как работает система отслеживания

Система отслеживания улучшений зданий в боте для Clash of Clans автоматически отслеживает изменения в игре и уведомляет вас о любых улучшениях.

### Принцип работы

1. **Создание первого снимка**: Когда вы активируете отслеживание, система делает "снимок" текущего состояния всех ваших зданий, героев и войск
2. **Регулярные проверки**: Каждые 3 минуты система проверяет ваш игровой профиль и сравнивает его с последним сохраненным состоянием
3. **Обнаружение изменений**: Если обнаруживается, что какое-то здание, герой или войско улучшилось, система отправляет вам уведомление
4. **Обновление снимка**: После обнаружения изменений система обновляет сохраненное состояние

### Что отслеживается

- **Здания**: Ратуша, оборонительные здания, ресурсные здания, армейские здания
- **Герои**: Король варваров, Королева лучниц, Великий хранитель, Королевский чемпион
- **Войска**: Все виды войск, которые можно улучшать в лаборатории
- **Заклинания**: Все заклинания, доступные для улучшения

### Требования для использования

1. **Активная премиум подписка**: Функция доступна только для пользователей с действующей премиум подпиской
2. **Привязанный аккаунт**: У вас должен быть привязан хотя бы один игровой профиль Clash of Clans
3. **Стабильное интернет-соединение**: Для регулярных проверок необходимо стабильное подключение к API Clash of Clans

### Как использовать

1. Убедитесь, что у вас есть активная премиум подписка
2. Привяжите ваш игровой профиль через главное меню
3. Перейдите в раздел "Отслеживание улучшений"
4. Нажмите "Активировать отслеживание"
5. Система создаст первый снимок и начнет отслеживание

### Особенности работы

- **Многопрофильная поддержка**: Если у вас привязано несколько профилей, система будет отслеживать все из них
- **Умные уведомления**: В уведомлениях указывается, в каком именно аккаунте произошли изменения (если профилей несколько)
- **Автоматическое отключение**: Если подписка истекает, отслеживание автоматически отключается
- **Защита от спама**: Система отправляет уведомления только при реальных изменениях

### Возможные проблемы и решения

**Проблема**: "Сервис отслеживания временно недоступен"
**Решение**: Обратитесь к администратору или попробуйте позже

**Проблема**: "Для использования отслеживания нужно привязать аккаунт игрока"
**Решение**: Привяжите ваш игровой тег через главное меню бота

**Проблема**: "Отслеживание улучшений доступно только для премиум подписчиков"
**Решение**: Оформите премиум подписку в соответствующем разделе

### Технические детали

- **Частота проверок**: Каждые 3 минуты
- **Источник данных**: Официальный API Clash of Clans
- **Хранение данных**: Снимки состояний сохраняются в базе данных бота
- **Безопасность**: Все данные обрабатываются только внутри системы бота

### Преимущества

- **Своевременные уведомления**: Узнавайте об улучшениях сразу после их завершения
- **Полный контроль**: Отслеживание всех возможных улучшений в игре
- **Удобство**: Не нужно постоянно заходить в игру для проверки
- **Надежность**: Система работает круглосуточно без перерывов